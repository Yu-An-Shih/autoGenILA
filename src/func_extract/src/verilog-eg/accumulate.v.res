out(0) = rst(-1) ? 0 : out_next(-1) = rst(-1) ? 0 : func(-1) ? out(-1) + in(-1) : out(-1)
= rst(-1) ? 0 : func(-1) ? : rst(-2) ? 0 : ...
